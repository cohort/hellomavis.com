/*! mavis - v0.1.0 - 2014-02-23
* Copyright (c) 2014 Robert Sargent; Licensed  */
$(document).ready(function(){function a(a){return a&&(a=a.replace("http://"+window.location.host,""),a=a.replace("#",""),a=a.replace(/^\/|\/$/g,"")),a}function b(){2!=t.data("flexslider").currentSlide&&l(),d()}function c(){d()}function d(){$(".slide").each(function(){var a=$(".slide-background",$(this));a.width($(window).width()),a.height(Math.max($(window).height(),a.css("min-height").replace(/[^-\d\.]/g," ")))})}function e(){$(document).scrollTop()<10?$("header > .over").addClass("fade-hidden"):$("header > .over").removeClass("fade-hidden")}function f(){r=setTimeout(function(){var a=window.location.pathname.substring(1);a!=n&&(n=a,i(a),j(a)),f()},50)}function g(a){void 0!=a&&a!=n&&window.history.pushState&&window.history.pushState(null,null,"http://"+location.host+"/"+a)}function h(){n="overview",i(n)}function i(b){p||$("ul#menu-primary-navigation > li").each(function(){if(b==a($("a",$(this)).attr("href"))){var c=$("a",$(this)).attr("title");document.title=(void 0!=c?c+" | ":"")+s,$(this).addClass("active")}else $(this).removeClass("active")})}function j(a){if(q){q=!1,p=!0;var b=$('section[id="'+a+'"]');if(b.length)if(b.offset()){var c=b.offset().top;void 0!=c?$("html,body").animate({scrollTop:c},Math.min(Math.max(Math.abs(c-$(window).scrollTop())/2,1e3),2e3),"easeInOutExpo",k):p=!1}else h()}}function k(){p=!1,i(n)}function l(){var a=[],b=null,c=$("ul.testimonials > li");c.length>1?(c.each(function(){b=$(this),"none"==b.css("display")&&a.push(b),b.hide()}),b=a[Math.floor(Math.random()*a.length)]):b=c,b.show()}function m(){d(),e(),$(".loading-overlay").fadeOut(400),$("ul#menu-primary-navigation > li").each(function(){$("a",$(this)).click(function(){$(this).attr("data-toggle","collapse"),$(this).attr("data-target",".navbar-collapse")})}),o&&""!=o&&"#/"!=o&&(q=!0,g(a(o))),f()}var n=window.location.pathname.substring(1).replace(/\//g,""),o=window.location.hash,p=!1,q=!1,r=null,s=$("title").text(),t=$(".flexslider");t.length?t.flexslider({animation:"slide",directionNav:!1,slideshowSpeed:1e4,start:m,before:b,after:c}):m(),$(window).scroll(function(){if(e(),!p){var a=$("section:in-viewport:first").attr("id");g(a)}}),$(window).resize(d),$("a").click(function(b){var c=$(this).attr("href"),d=new RegExp("http://").test(c),e=new RegExp(location.host).test(c),f=new RegExp("mailto:").test(c),h=window.location.pathname.match(/\//g).length>2;f||h||!(!d||d&&e)||(b.preventDefault(),q=!0,g(a(c)))}),$(".more-link").each(function(){$(this).click(function(){$(this).addClass("hidden"),$(".close-link",$(this).parent()).removeClass("hidden"),$(".more",$(this).parent().parent()).slideDown(400)})}),$(".close-link").each(function(){$(this).click(function(){$(this).addClass("hidden"),$(".more-link",$(this).parent()).removeClass("hidden"),$(".more",$(this).parent().parent()).slideUp(400)})})});