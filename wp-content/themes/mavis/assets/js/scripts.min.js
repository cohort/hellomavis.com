/*! mavis - v0.1.0 - 2014-01-07
* Copyright (c) 2014 Robert Sargent; Licensed  */
$(document).ready(function(){function a(a){return a=a.replace("http://"+window.location.host,""),a=a.replace("#",""),a=a.replace(/^\/|\/$/g,"")}function b(){var a=0,b=$(window).width()>768?720:460;$(".slide").each(function(){var c=$(".slide-content",$(this));a=Math.max(a,c.outerHeight()+b)}),$(".slide").each(function(){var b=$(".slide-background",$(this));b.width($(window).width()),b.height(a)})}function c(){n=setTimeout(function(){var a=window.location.pathname.substring(1);a!=j&&(j=a,f(a),g(a)),c()},50)}function d(a){a!=j&&window.history.pushState&&window.history.pushState(null,null,"http://"+location.host+"/"+a)}function e(){j="overview",f(j)}function f(b){l||$("ul#menu-primary-navigation > li").each(function(){b==a($("a",$(this)).attr("href"))?$(this).addClass("active"):$(this).removeClass("active")})}function g(a){if(m){m=!1,l=!0;var b=$('section[id="'+a+'"]');if(b.offset()){var c=b.offset().top;void 0!=c?$("html,body").animate({scrollTop:c},Math.max(Math.abs(c-$(window).scrollTop())/2,1e3),"easeInOutExpo",h):l=!1}else e()}}function h(){l=!1,f(j)}function i(){b(),$("ul#menu-primary-navigation > li").each(function(){$("a",$(this)).click(function(){$(this).attr("data-toggle","collapse"),$(this).attr("data-target",".navbar-collapse")})}),k&&""!=k&&"#/"!=k&&(m=!0,d(a(k))),c()}var j=window.location.pathname.substring(1).replace(/\//g,""),k=window.location.hash,l=!1,m=!1,n=null;$(".flexslider").flexslider({animation:"slide",directionNav:!1,start:i}),$(window).scroll(function(){if($(document).scrollTop()<280?$("header > .over").addClass("fade-hidden"):$("header > .over").removeClass("fade-hidden"),!l){var a=$("section:in-viewport:first").attr("id");d(a)}}),$(window).resize(b),$("a").click(function(b){var c=$(this).attr("href"),e=new RegExp("http://").test(c),f=new RegExp(location.host).test(c),g=new RegExp("mailto:").test(c);!g&&(!e||e&&f)&&(b.preventDefault(),m=!0,d(a(c)))}),$(".more-link").each(function(){$(this).click(function(){$(this).addClass("hidden"),$(".close-link",$(this).parent()).removeClass("hidden"),$(".more",$(this).parent().parent()).slideDown(400)})}),$(".close-link").each(function(){$(this).click(function(){$(this).addClass("hidden"),$(".more-link",$(this).parent()).removeClass("hidden"),$(".more",$(this).parent().parent()).slideUp(400)})})});