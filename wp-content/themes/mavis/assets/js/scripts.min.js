/*! mavis - v0.1.0 - 2014-01-08
* Copyright (c) 2014 Robert Sargent; Licensed  */
$(document).ready(function(){function a(a){return a=a.replace("http://"+window.location.host,""),a=a.replace("#",""),a=a.replace(/^\/|\/$/g,"")}function b(){var a=0,b=$(window).width()>768?720:460;$(".slide").each(function(){var c=$(".slide-content",$(this));a=Math.max(a,c.outerHeight()+b)}),$(".slide").each(function(){var b=$(".slide-background",$(this));b.width($(window).width()),b.height(a)})}function c(){$(document).scrollTop()<10?$("header > .over").addClass("fade-hidden"):$("header > .over").removeClass("fade-hidden")}function d(){o=setTimeout(function(){var a=window.location.pathname.substring(1);a!=k&&(k=a,g(a),h(a)),d()},50)}function e(a){void 0!=a&&a!=k&&window.history.pushState&&window.history.pushState(null,null,"http://"+location.host+"/"+a)}function f(){k="overview",g(k)}function g(b){m||$("ul#menu-primary-navigation > li").each(function(){b==a($("a",$(this)).attr("href"))?$(this).addClass("active"):$(this).removeClass("active")})}function h(a){if(n){n=!1,m=!0;var b=$('section[id="'+a+'"]');if(b.length)if(b.offset()){var c=b.offset().top;void 0!=c?$("html,body").animate({scrollTop:c},Math.min(Math.max(Math.abs(c-$(window).scrollTop())/2,1e3),2e3),"easeInOutExpo",i):m=!1}else f()}}function i(){m=!1,g(k)}function j(){b(),c(),$(".loading-overlay").fadeOut(400),$("ul#menu-primary-navigation > li").each(function(){$("a",$(this)).click(function(){$(this).attr("data-toggle","collapse"),$(this).attr("data-target",".navbar-collapse")})}),l&&""!=l&&"#/"!=l&&(n=!0,e(a(l))),d()}var k=window.location.pathname.substring(1).replace(/\//g,""),l=window.location.hash,m=!1,n=!1,o=null,p=$(".flexslider");p.length?p.flexslider({animation:"slide",directionNav:!1,start:j}):j(),$(window).scroll(function(){if(c(),!m){var a=$("section:in-viewport:first").attr("id");e(a)}}),$(window).resize(b),$("a").click(function(b){var c=$(this).attr("href"),d=new RegExp("http://").test(c),f=new RegExp(location.host).test(c),g=new RegExp("mailto:").test(c),h=window.location.pathname.match(/\//g).length>2;g||h||!(!d||d&&f)||(b.preventDefault(),n=!0,e(a(c)))}),$(".more-link").each(function(){$(this).click(function(){$(this).addClass("hidden"),$(".close-link",$(this).parent()).removeClass("hidden"),$(".more",$(this).parent().parent()).slideDown(400)})}),$(".close-link").each(function(){$(this).click(function(){$(this).addClass("hidden"),$(".more-link",$(this).parent()).removeClass("hidden"),$(".more",$(this).parent().parent()).slideUp(400)})})});